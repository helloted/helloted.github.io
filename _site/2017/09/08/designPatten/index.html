<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Write your site description here. It will be used as your sites meta description as well!">

    <title>iOS设计模式 - Helloted Blog</title>

    <link rel="canonical" href="http://www.helloted.com/2017/09/08/designPatten/">

    <link rel="shortcut icon" href="/img/favicon.ico">
   
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Helloted Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
				
                <li>
                    <a href="/about/">About</a>
                </li>
				
                
				
                <li>
                    <a href="/contact/">Contact</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/default.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>iOS设计模式</h1>
                    
                    <h2 class="subheading">iOS开发中常用的一些设计模式</h2>
                    
                    <span class="meta">Posted by Ted on September 8, 2017</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>部分代码位置<a href="https://github.com/helloted/designpattern">Github-设计模式</a></p>

<h4 id="1单例模式singleton">1、单例模式(Singleton)</h4>

<p>概念理解：整个应用或系统只能有该类的一个实例</p>

<p>iOS中几个常用的单例：</p>

<ul>
  <li>UIApplication类提供了 ＋sharedAPplication方法创建和获取UIApplication单例</li>
  <li>NSBundle类提供了 +mainBunle方法获取NSBundle单例</li>
  <li>NSFileManager类提供了 ＋defaultManager方法创建和获得NSFileManager单例。（PS：有些时候我们得放弃使用单例模式，使用－init方法去实现一个新的实例，比如使用委托时）</li>
  <li>NSNotificationCenter提供了 ＋defaultCenter方法创建和获取NSNotificationCenter单例（PS：该类还遵循了另一个重要的设计模式：观察者模式）</li>
  <li>NSUserDefaults类提供了 ＋defaultUserDefaults方法去创建和获取NSUserDefaults单例</li>
</ul>

<p>我们也可以自己去生成一个单例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>+ (Singleton *)sharedSingleton{
    static dispatch_once_t once_token;&lt;3&gt;
    dispatch_once(&amp;once_token,^{
        sharedSingleton = [[self alloc] init];
    });
    return sharedSingleton;&lt;5&gt;
}
</code></pre>
</div>

<h4 id="2mvc模式">2、MVC模式</h4>

<p>MVC是Cocoa框架采用推荐的一种设计模式，也是iOS开发中最常用的一种模式</p>

<p><code class="highlighter-rouge">M-Model:</code> “模型”封装应用程序的数据，模型对象维护应用程序的数据，并定义操作数据的特定逻辑。模型对象可以复用，因为它表示的知识适用于特定问题的领域。理想状况下，模型对象同用于进行显示和编辑的用户界面之间不应有任何直接的关联。</p>

<p><code class="highlighter-rouge">V-View</code>: “视图”显示和编辑数据，视图对象可以响应用户操作。</p>

<p><code class="highlighter-rouge">C-Controller</code>: “控制器”处理前两者之间的逻辑关系。控制器对象作为中间人或者协调人，使视图得以知晓模型的变更而给予响应。控制器对象还可以作为管理其他对象的生命周期，进行设置和协调任务。</p>

<h4 id="3原型模式prototype">3、原型模式(Prototype)</h4>

<p>概念：使用原型实例指定对象的种类，并通过复制这个原型创建新的对象，原型模型也称为复制模式，此模式是生成对象的真实副本，以用作同一环境下其他相关事物的基础(原型)</p>

<p>应用：NSObject的派生类提供了实现深复制的协议，其他类需要实现NSCopying协议及其方法<code class="highlighter-rouge">-(id)copyWithZone:(NSZone *)zone</code>来实现<code class="highlighter-rouge">-(id)copy</code>方法，否则会引发异常。思路是复制必需的成员变量与资源，传给此类的新实例。</p>

<h4 id="4简单工厂模式simple-factory">4、简单工厂模式(Simple Factory)</h4>

<p>概念：提供一个创建实例的接口，根据传入值不一样来获取不一样的类</p>

<p>应用：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">AnimalFactory</span><span class="p">:</span><span class="nc">NSObject</span>
<span class="k">-</span><span class="p">(</span><span class="n">Animal</span> <span class="o">*</span><span class="p">)</span><span class="nf">createAnimalyWithType</span><span class="p">:(</span><span class="n">Type</span><span class="p">)</span><span class="nv">type</span><span class="p">;</span>
<span class="k">@end</span><span class="p">;</span>
</code></pre>
</div>

<h4 id="5工厂方法模式factory-method">5、工厂方法模式(Factory Method)</h4>

<p>概念：封装类中不变的部分，提取其中个性化善变的部分为独立类，通过依赖注入以达到解耦、复用和方便后期维护拓展的目的.定义一个创建产品对象的工厂接口，将实际创建工作推迟到子类当中</p>

<p>应用：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">AnimalFactory</span><span class="p">:</span><span class="nc">NSObject</span>
<span class="k">-</span><span class="p">(</span><span class="n">Animal</span><span class="o">*</span><span class="p">)</span><span class="n">createAnimal</span><span class="p">;</span>
<span class="k">@end</span><span class="p">;</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">DogFactory</span><span class="p">:</span><span class="nc">AnimalFactory</span><span class="p">;</span>
<span class="k">@implementation</span> <span class="nc">DogFactory</span>
<span class="k">-</span><span class="p">(</span><span class="n">Animal</span> <span class="o">*</span><span class="p">)</span><span class="n">createAnimal</span><span class="p">{</span>
<span class="cp">#Dog继承自Animal
</span><span class="n">retrurn</span> <span class="p">[[</span><span class="n">Dog</span> <span class="nf">alloc</span><span class="p">]</span><span class="nf">init</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">CatFactory</span><span class="p">:</span><span class="nc">AnimalFactory</span><span class="p">;</span>
<span class="k">@implementation</span> <span class="nc">Cat</span> <span class="n">Factory</span>
<span class="o">-</span><span class="p">(</span><span class="n">Animal</span> <span class="o">*</span><span class="p">)</span><span class="n">createAnimal</span>
<span class="n">retrurn</span> <span class="p">[[</span><span class="n">Cat</span> <span class="nf">alloc</span><span class="p">]</span><span class="nf">init</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="6抽象工厂模式abstract-factory">6、抽象工厂模式(Abstract Factory)</h4>

<p>概念：提供一个创建一系列相关或者相互依赖对象的接口，而无需指定它们具体的类</p>

<p>应用：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">AnimalFactory</span><span class="p">:</span><span class="nc">NSObject</span>
<span class="k">-</span><span class="p">(</span><span class="n">Dog</span> <span class="o">*</span><span class="p">)</span><span class="n">createDog</span><span class="p">;</span>
<span class="k">-</span><span class="p">(</span><span class="n">Cat</span> <span class="o">*</span><span class="p">)</span><span class="n">createCat</span><span class="p">;</span>
<span class="k">@end</span><span class="p">;</span>
</code></pre>
</div>

<p>Cocoa中的NSNumber也是如此，numberWithBool:和numberWithInt:分别返回的是NSCFBoolean、NSCFNumber类型</p>



                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2017/05/30/hotfix/" data-toggle="tooltip" data-placement="top" title="热修复=Runtime+Javascriptcore">&larr; 上一篇</a>
                    </li>
                    
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://github.com/helloted">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:helloted@live.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Helloted 2017</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


    


</body>

</html>
