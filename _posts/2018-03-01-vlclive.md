---
layout:     post
category:   基础
title:      "Mac上搭建直播服务器"
subtitle:   "在Mac上搭建nginx+rtmp进行直播推流"
date:       2018-03-01 12:00:00
author:     "Ted"
header-img: "img/bg_01.jpg"
---

#### 1、安装Nginx

通过homebrew来安装支持rtmp协议模块的nginx

```
brew install nginx-full --with-rtmp-module
```

通过下面的命令来查看安装位置

```
brew info nginx-full
```

![img](/img/Simple_7/22.png)

通过浏览器访问[http://localhost:8080](http://localhost:8080)

![img](/img/Simple_7/23.png)

在nginx.conf里配置

```
rtmp {
    server {
        listen 1935;
        application zbcs {
            live on;
            record off;
        }
    }
}
```

重启

```
nginx -s reload
```

#### 2、安装ffmpeg来推流

```
brew install ffmpeg
```

推流命令为

```
ffmpeg -re -i /Users/imac/Documents/demo.mp4 -vcodec copy -f flv rtmp://127.0.0.1:1935/zbcs/room
```

```
ffmpeg -re -i 你的视频文件的绝对路径 -vcodec copy -f flv rtmp://localhost:1935/nginx配置的application名称/room
```

这就开始推流了

#### 3、VLC直播

下载vlc播放器，在File->open network输入

```
rtmp://127.0.0.1:1935/zbcs/room
```

![img](/img/Simple_7/24.png)

就可以视频播放了